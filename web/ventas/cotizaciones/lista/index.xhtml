<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:m="http://java.sun.com/jsf/composite/matisses"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <link href="/360/css/bootstrap.min.css" rel="stylesheet"/>
        <!--[if lt IE 9]>
                        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
                <![endif]-->
        <link href="/360/css/styles.css" rel="stylesheet"/>
        <link href="/360/css/multileveldropdown.css" rel="stylesheet"/>
        <script src="/360/js/arriba.js"></script>
        <script src="/360/js/ventas.js"></script>
        <title>360 - Listar Cotizaciones</title>
    </h:head>

    <h:body>
        <f:event type="preRenderView" listener="#{userSessionInfoMBean.checkAlreadyLoggedin}"/>
        <m:navbar/>

        <div class="container">
            <span class="ir-arriba hidden-sm hidden-xs">
                <span class="glyphicon glyphicon-chevron-up" style="top: -2px !important"></span>
            </span>

            <h:panelGroup id="panelCorreo">
                <h:panelGroup>
                    <h:form id="formCorreo">
                        <div class="modal fade" id="modalCorreo">
                            <div class="modal-dialog">
                                <div class="modal-content dialog-content noround">
                                    <div class="modal-header dialog-header">
                                        <button type="button" class="close" data-dismiss="modal" data-hidden="true">
                                            &times;
                                        </button>
                                        <h4 class="modal-title">
                                            Enviar correo
                                        </h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="form-group">
                                                    <h:outputLabel value="Correo electronico:"/>
                                                    <h:inputText class="form-control input-lg noround" pt:placeholder="Correo electronico" value="#{listaCotizacionesMBean.correoCliente}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer dialog-footer">
                                        <div class="row">
                                            <div class="col-xs-12 right-component">
                                                <p:remoteCommand name="cerrarModal" update=":panelCorreo" oncomplete="cerrarModalCorreo(); abrirModalEspera(); enviarCorreoCliente();"/>
                                                <p:remoteCommand name="enviarCorreoCliente" actionListener="#{listaCotizacionesMBean.enviarCorreoCliente}" update=":formCorreo :formCotizaciones:msg"
                                                                 oncomplete="cerrarModalEspera();"/>
                                                <button type="button" class="btn btn-default btn-lg noround" data-dismiss="modal">
                                                    Cerrar
                                                </button>
                                                <button type="button" class="btn btn-primary btn-lg noround" onclick="cerrarModal();" style="margin-left: 0px">
                                                    Enviar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:form>
                </h:panelGroup>
            </h:panelGroup>

            <h:form id="formCotizaciones">
                <div class="row">
                    <div class="col-xs-12">
                        <ol class="breadcrumb">
                            <li class="active">
                                <a>Cotizaciones</a>
                            </li>
                        </ol>
                    </div>
                </div>

                <!-- Aqui van todos los p:remoteCommand que se van a usar, para que funcione tanto en pc como en mobil -->
                <p:remoteCommand name="seleccionarFiltroEstado" actionListener="#{listaCotizacionesMBean.seleccionarFiltroEstado}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:filtroEstados :formCotizaciones:filtroEstadosMovil :formCotizaciones:cotizaciones :formCotizaciones:msg
                                 :formCotizaciones:filtroAsesores :formCotizaciones:filtroAsesoresMovil :formCotizaciones:paginador :formCotizaciones:paginadorMovil"/>
                <p:remoteCommand name="seleccionarAsesor" actionListener="#{listaCotizacionesMBean.seleccionarAsesor}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:filtroEstados :formCotizaciones:filtroEstadosMovil :formCotizaciones:cotizaciones :formCotizaciones:filtroAsesores
                                 :formCotizaciones:filtroAsesoresMovil :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="aplicarFiltroFechas" actionListener="#{listaCotizacionesMBean.aplicarFiltroFechas}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:filtroAsesores :formCotizaciones:filtroAsesoresMovil :formCotizaciones:paginador
                                 :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="aplicarFiltroFechasMovil" actionListener="#{listaCotizacionesMBean.aplicarFiltroFechasMovil}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:filtroAsesores :formCotizaciones:filtroAsesoresMovil :formCotizaciones:paginador
                                 :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="aplicarParametroBusqueda" actionListener="#{listaCotizacionesMBean.aplicarParametroBusqueda}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:filtroAsesores :formCotizaciones:filtroAsesoresMovil :formCotizaciones:paginador
                                 :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="aplicarParametroBusquedaMovil" actionListener="#{listaCotizacionesMBean.aplicarParametroBusquedaMovil}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:filtroAsesores :formCotizaciones:filtroAsesoresMovil :formCotizaciones:paginador
                                 :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="cambiarSizePage" actionListener="#{listaCotizacionesMBean.cambiarSizePage}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:filtroAsesores :formCotizaciones:filtroAsesoresMovil :formCotizaciones:datosMostrar
                                 :formCotizaciones:datosMostrarMovil :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="mostrarPrimeraPagina" actionListener="#{listaCotizacionesMBean.mostrarPrimeraPagina}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="mostrarPaginaAnterior" actionListener="#{listaCotizacionesMBean.mostrarPaginaAnterior}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="mostrarPaginaEspecifica" actionListener="#{listaCotizacionesMBean.mostrarPaginaEspecifica}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="mostrarPaginaSiguiente" actionListener="#{listaCotizacionesMBean.mostrarPaginaSiguiente}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>
                <p:remoteCommand name="mostrarUltimaPagina" actionListener="#{listaCotizacionesMBean.mostrarUltimaPagina}" oncomplete="cerrarModalEspera();"
                                 update=":formCotizaciones:cotizaciones :formCotizaciones:paginador :formCotizaciones:paginadorMovil :formCotizaciones:msg"/>

                <div class="row hidden-sm hidden-xs">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <h:outputLabel value="Filtrar estado:"/>
                            <h:panelGroup id="filtroEstados">
                                <div class="dropdown">
                                    <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                            id="selEstado" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        #{listaCotizacionesMBean.estadoSeleccionado}
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selEstado">
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarFiltroEstado([{name: 'estado', value: ''}]);">
                                                Todos
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarFiltroEstado([{name: 'estado', value: 'O'}]);">
                                                Abierta
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarFiltroEstado([{name: 'estado', value: 'C'}]);">
                                                Cerrada
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <div class="form-group">
                            <h:outputLabel value="Filtrar asesor:"/>
                            <h:panelGroup id="filtroAsesores">
                                <div class="dropdown">
                                    <button type="button" style="width: 100%" id="selAsesor" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                                            class="btn btn-default dropdown-toggle input-lg noround #{userSessionInfoMBean.validarPermisoUsuario('COTIZACIONES_TODAS', 'VISUALIZAR') ? '' : 'disabled'}">
                                        #{listaCotizacionesMBean.asesorSeleccionado}
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selAsesor">
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarAsesor([{name: 'asesor', value: ''}]);">
                                                Todos
                                            </a>
                                        </li>
                                        <ui:repeat value="#{listaCotizacionesMBean.asesores}" var="asesor">
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarAsesor([{name: 'asesor', value: '#{asesor[1]}'}]);">
                                                    #{asesor[0]}
                                                </a>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-5">
                        <div class="form-group">
                            <h:outputLabel value="Filtrar fecha:"/>
                            <div class="input-group">
                                <p:calendar id="fechaInicio" pattern="dd-MM-yyyy" class="input-lg mask" pt:placeholder="Fecha Inicial" value="#{listaCotizacionesMBean.fechaInicial}">
                                    <p:ajax event="dateSelect" rendered=":formCotizaciones:fechaInicio"/>
                                </p:calendar>
                                <span class="input-group-addon noround" style="border-left:  none; border-right: none"> a </span>
                                <p:calendar id="fechaFin" pattern="dd-MM-yyyy" class="input-lg mask" pt:placeholder="Fecha Final" value="#{listaCotizacionesMBean.fechaFinal}">
                                    <p:ajax event="dateSelect" rendered=":formCotizaciones:fechaFin"/>
                                </p:calendar>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary btn-lg noround" onclick="abrirModalEspera(); aplicarFiltroFechas();">
                                        <span class="glyphicon glyphicon-ok"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <div class="form-group">
                            <h:outputLabel value="Parámetro búsqueda:"/>
                            <h:inputText class="form-control input-lg noround" pt:placeholder="Parámetro búsqueda" value="#{listaCotizacionesMBean.parametroBusqueda}" style="font-size: 15px !important"
                                         autocomplete="off" onkeypress="if (event.keyCode === 13) {
                                                     abrirModalEspera();
                                                     aplicarParametroBusqueda();
                                                     return false;
                                                 }">
                                <f:ajax event="change"/>
                            </h:inputText>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <h:outputLabel value="Datos mostrar: "/>
                            <h:panelGroup id="datosMostrar">
                                <div class="input-group">
                                    <div class="dropdown">
                                        <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                                id="selSizePage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                            #{listaCotizacionesMBean.sizePage}
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="selSizePage">
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '12'}]);">
                                                    12
                                                </a>
                                            </li>
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '24'}]);">
                                                    24
                                                </a>
                                            </li>
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '48'}]);">
                                                    48
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <span class="input-group-addon input-group-matisses noround">x pag.</span>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-5 center-component" style="top: 25px">
                        <div class="form-group">
                            <h:panelGroup id="paginador">
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPrimeraPagina();">
                                        1
                                    </button>
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaAnterior();">
                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                    </button>
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default dropdown-toggle btn-lg noround" data-toggle="dropdown"
                                                aria-haspopup="true" aria-expanded="false">
                                            #{listaCotizacionesMBean.pagina} de #{listaCotizacionesMBean.totalPaginas}
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" style="max-height: 165px; overflow-y: auto">
                                            <ui:repeat value="#{listaCotizacionesMBean.paginas}" var="pagina">
                                                <li>
                                                    <a onclick="abrirModalEspera(); mostrarPaginaEspecifica([{name: 'pagina', value: '#{pagina}'}])" style="cursor: pointer">
                                                        #{pagina}
                                                    </a>
                                                </li>
                                            </ui:repeat>
                                        </ul>
                                    </div>
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaSiguiente();">
                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                    </button>
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarUltimaPagina();">
                                        #{listaCotizacionesMBean.totalPaginas}
                                    </button>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <hr/>
                </div>
                <div class="row hidden-lg hidden-md margin-bottom-10">
                    <div class="col-xs-12 margin-bottom-10">
                        <p:remoteCommand name="mostrarFiltrosMovil" actionListener="#{listaCotizacionesMBean.mostrarFiltrosMovil}" update=":formCotizaciones:btnFitros"/>
                        <h:panelGroup id="btnFitros">
                            <button type="button" class="btn btn-default btn-lg form-control noround" style="height: 46px" data-toggle="collapse" data-target="#collapseFiltros"
                                    onclick="mostrarFiltrosMovil();">
                                <div class="col-xs-10">
                                    Filtros <span class="glyphicon glyphicon-filter"></span>
                                </div>
                                <div class="col-xs-2 right-component">
                                    <span class="glyphicon #{listaCotizacionesMBean.mostrarFiltros ? 'glyphicon-triangle-top' : 'glyphicon-triangle-bottom'}"></span>
                                </div>
                            </button>
                        </h:panelGroup>
                    </div>
                    <div style="padding: 0 15px">
                        <div class="collapse" id="collapseFiltros">
                            <div class="col-xs-12" style="padding: 0 0px; background-color: #DDDDDD">
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <div class="form-group">
                                        <h:outputLabel value="Filtrar estado:"/>
                                        <h:panelGroup id="filtroEstadosMovil">
                                            <div class="dropdown">
                                                <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                                        id="selEstado" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                    #{listaCotizacionesMBean.estadoSeleccionado}
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selEstado">
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarFiltroEstado([{name: 'estado', value: ''}]);">
                                                            Todos
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarFiltroEstado([{name: 'estado', value: 'O'}]);">
                                                            Abierta
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarFiltroEstado([{name: 'estado', value: 'C'}]);">
                                                            Cerrada
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-4">
                                    <div class="form-group">
                                        <h:outputLabel value="Filtrar asesor:"/>
                                        <h:panelGroup id="filtroAsesoresMovil">
                                            <div class="dropdown">
                                                <button type="button" style="width: 100%" id="selAsesor" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                                                        class="btn btn-default dropdown-toggle input-lg noround #{userSessionInfoMBean.validarPermisoUsuario('COTIZACIONES_TODAS', 'VISUALIZAR') ? '' : 'disabled'}">
                                                    #{listaCotizacionesMBean.asesorSeleccionado}
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selAsesor">
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarAsesor([{name: 'asesor', value: ''}]);">
                                                            Todos
                                                        </a>
                                                    </li>
                                                    <ui:repeat value="#{listaCotizacionesMBean.asesores}" var="asesor">
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarAsesor([{name: 'asesor', value: '#{asesor[1]}'}]);">
                                                                #{asesor[0]}
                                                            </a>
                                                        </li>
                                                    </ui:repeat>
                                                </ul>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-5">
                                    <div class="form-group">
                                        <h:outputLabel value="Filtrar fecha:"/>
                                        <div class="input-group">
                                            <h:inputText class="form-control input-lg noround" pt:placeholder="dd/mm/aaaa" value="#{listaCotizacionesMBean.fechaInicialMovil}"
                                                         style="font-size: 15px !important">
                                                <f:ajax event="change"/>
                                            </h:inputText>
                                            <span class="input-group-addon noround" style="border-left:  none; border-right: none"> a </span>
                                            <h:inputText class="form-control input-lg noround" pt:placeholder="dd/mm/aaaa" value="#{listaCotizacionesMBean.fechaFinalMovil}"
                                                         style="font-size: 15px !important">
                                                <f:ajax event="change"/>
                                            </h:inputText>
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-primary btn-lg noround" onclick="abrirModalEspera(); aplicarFiltroFechasMovil();">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-4">
                                    <div class="form-group">
                                        <h:outputLabel value="Parámetro búsqueda:"/>
                                        <h:inputText class="form-control input-lg noround" pt:placeholder="Parámetro búsqueda" value="#{listaCotizacionesMBean.parametroBusquedaMovil}"
                                                     style="font-size: 15px !important" autocomplete="off" onkeypress="if (event.keyCode === 13) {
                                                                 abrirModalEspera();
                                                                 aplicarParametroBusquedaMovil();
                                                                 return false;
                                                             }"/>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <div class="form-group">
                                        <h:outputLabel value="Datos mostrar: "/>
                                        <h:panelGroup id="datosMostrarMovil">
                                            <div class="input-group">
                                                <div class="dropdown">
                                                    <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                                            id="selSizePage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        #{listaCotizacionesMBean.sizePage}
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" aria-labelledby="selSizePage">
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '12'}]);">
                                                                12
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '24'}]);">
                                                                24
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '48'}]);">
                                                                48
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <span class="input-group-addon input-group-matisses noround">x pag.</span>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-5 center-component margin-bottom-10">
                                    <div class="form-group">
                                        <h:panelGroup id="paginadorMovil">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPrimeraPagina();">
                                                    1
                                                </button>
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaAnterior();">
                                                    <span class="glyphicon glyphicon-chevron-left"></span>
                                                </button>
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-default dropdown-toggle btn-lg noround" data-toggle="dropdown"
                                                            aria-haspopup="true" aria-expanded="false">
                                                        #{listaCotizacionesMBean.pagina} de #{listaCotizacionesMBean.totalPaginas}
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" style="max-height: 165px; overflow-y: auto">
                                                        <ui:repeat value="#{listaCotizacionesMBean.paginas}" var="pagina">
                                                            <li>
                                                                <a onclick="abrirModalEspera(); mostrarPaginaEspecifica([{name: 'pagina', value: '#{pagina}'}])" style="cursor: pointer">
                                                                    #{pagina}
                                                                </a>
                                                            </li>
                                                        </ui:repeat>
                                                    </ul>
                                                </div>
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaSiguiente();">
                                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                                </button>
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarUltimaPagina();">
                                                    #{listaCotizacionesMBean.totalPaginas}
                                                </button>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <p:messages id="msg" showDetail="true" showSummary="true"/>

                <div class="row">
                    <div class="col-xs-12 right-component margin-bottom-10">
                        <p:remoteCommand name="seleccionarEnvioCorreoCliente" actionListener="#{listaCotizacionesMBean.seleccionarEnvioCorreoCliente}" update=":panelCorreo" oncomplete="abrirModalCorreo();"/>
                        <p:remoteCommand name="editarCotizacion" action="#{listaCotizacionesMBean.editarCotizacion}" oncomplete="cerrarModalEspera();" update=":formCotizaciones"/>
                        <h:panelGroup id="btns">
                            <button type="button" onclick="abrirModalEspera(); editarCotizacion();" class="btn btn-primary btn-lg noround
                                    #{listaCotizacionesMBean.cotizacion eq null or listaCotizacionesMBean.cotizacion.docNum eq 0 ? 'disabled btn-deshabilitado' : ''}">
                                Editar
                            </button>
                            <button type="button" onclick="#{listaCotizacionesMBean.abrirPdf()}" class="btn btn-default btn-lg noround
                                    #{listaCotizacionesMBean.cotizacion eq null or listaCotizacionesMBean.cotizacion.docNum eq 0 ? 'disabled btn-deshabilitado' : ''}">
                                PDF
                            </button>
                            <button type="button" onclick="seleccionarEnvioCorreoCliente();" class="btn btn-default btn-lg noround
                                    #{listaCotizacionesMBean.cotizacion eq null or listaCotizacionesMBean.cotizacion.docNum eq 0 ? 'disabled btn-deshabilitado' : ''}">
                                Enviar
                            </button>
                        </h:panelGroup>
                    </div>
                </div>

                <div class="row">
                    <p:remoteCommand name="seleccionarCotizacion" actionListener="#{listaCotizacionesMBean.seleccionarCotizacion}" update=":formCotizaciones:btns :formCotizaciones:cotizaciones"
                                     oncomplete="cerrarModalEspera();"/>
                    <h:panelGroup id="cotizaciones">
                        <ui:repeat value="#{listaCotizacionesMBean.cotizaciones}" var="cotizacion">
                            <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                <div onclick="abrirModalEspera(); seleccionarCotizacion([{name: 'docNum', value: '#{cotizacion.docNum}'}]);" class="pointer-cursor
                                     #{listaCotizacionesMBean.cotizacion.docNum eq cotizacion.docNum and cotizacion.docStatus eq 'C' ? 'contenedor-cotizaciones-cerrada-activo' :
                                       listaCotizacionesMBean.cotizacion.docNum eq cotizacion.docNum and cotizacion.docStatus eq 'O' ? 'contenedor-cotizaciones-activo' :
                                       cotizacion.docStatus eq 'C' ? 'contenedor-cotizaciones-cerrada' : 'contenedor-cotizaciones'}">
                                    <div class="row">
                                        <div class="col-xs-12 center-component">
                                            #{cotizacion.cardCode}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 center-component" style="height: 50px">
                                            <b style="font-size: 17px">#{cotizacion.cardName}</b>
                                        </div>
                                    </div>
                                    <hr style="border-bottom: 1px solid #{cotizacion.docStatus eq 'C' ? '#707070' : '#BF0039'}; margin-top: 15px; margin-bottom: 15px;
                                        border-top: #{cotizacion.docStatus eq 'C' ? 'none' : ''}"/>
                                    <div class="row">
                                        <div class="col-xs-12 center-component" style="height: 60px">
                                            #{baruGenericMBean.obtenerNombreAsesor(cotizacion.slpCode)}
                                            <br/>
                                            <b>Asesor</b>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 center-component" style="font-size: 25px; margin-top: 10px">
                                            <b style="color: #{cotizacion.docStatus eq 'C' ? '#707070' : '#BF0039'}">
                                                #{cotizacion.docStatus eq 'C' ? 'CERRADA' : cotizacion.docStatus eq 'O' ? 'ABIERTA' : 'SIN ESTADO'}
                                            </b>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-6 center-component" style="font-size: 15px; border-right: 1px solid #{cotizacion.docStatus eq 'C' ? '#707070' : '#BF0039'}; margin-top: 10px">
                                            <h:outputText value="#{cotizacion.docDate}">
                                                <f:convertDateTime pattern="yyyy-MM-dd"/>
                                            </h:outputText>
                                        </div>
                                        <div class="col-xs-6 center-component" style="font-size: 15px; margin-top: 10px">
                                            ##{cotizacion.docNum}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ui:repeat>
                    </h:panelGroup>
                </div>

            </h:form>
        </div>
        <!-- script references -->
        <script src="/360/js/bootstrap.min.js"></script>
    </h:body>
</html>