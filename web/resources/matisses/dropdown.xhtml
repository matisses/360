<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:composite="http://java.sun.com/jsf/composite" 
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <composite:interface>
        <composite:attribute name="noSelectionValue" />
        <composite:attribute name="selectedValue" />
        <composite:attribute name="value"  />
        <composite:attribute name="selectItems" type="java.util.List"/>
    </composite:interface>

    <composite:implementation>
        <div class="dropdown">
            <script>
                function setDropDownValue(newValue) {
                    var inputHidden = $("[id$='dropDownValue']");
                    inputHidden.val(newValue);
                }
            </script>
            <h:inputHidden value="#{cc.attrs.selectedValue}" id="dropDownValue" >
                <f:ajax event="change"/>
            </h:inputHidden>
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                #{cc.attrs.noSelectionValue}
                <span class="caret"></span>
            </button>

            <ul class="dropdown-menu" aria-labelledby="dropdownMenu">
                <ui:repeat value="#{cc.attrs.selectItems}" var="item">
                    <li><a href="#" onclick=" setDropDownValue('#{item.value}')">#{item.label}</a></li>
                </ui:repeat>
            </ul>
        </div>
    </composite:implementation>
</html>

