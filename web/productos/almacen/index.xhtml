<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:m="http://java.sun.com/jsf/composite/matisses"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <link href="/360/css/bootstrap.min.css" rel="stylesheet" />
        <!--[if lt IE 9]>
                        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
                <![endif]-->
        <link href="/360/css/styles.css" rel="stylesheet" />
        <link href="/360/css/multileveldropdown.css" rel="stylesheet" />
        <script src="/360/js/arriba.js"></script>
        <title>360 - Saldos almacén</title>
    </h:head>

    <h:body>
        <f:event type="preRenderView" listener="#{userSessionInfoMBean.checkAlreadyLoggedin}"/>
        <m:navbar/>

        <span class="ir-arriba">
            <span class="glyphicon glyphicon-chevron-up" style="top: -2px !important"></span>
        </span>

        <div class="container">

            <h:form id="formSaldos">
                <div class="row">
                    <div class="col-xs-12">
                        <ol class="breadcrumb">
                            <li class="active">
                                <a>Inventario almacén</a>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="row">
                    <p:remoteCommand name="obtenerSaldoAlmacen" actionListener="#{saldoAlmacenMBean.obtenerSaldoAlmacen}" update=":formSaldos:datos :formSaldos:msg" oncomplete="cerrarModalEspera();"/>
                    <p:remoteCommand name="limpiar" actionListener="#{saldoAlmacenMBean.limpiar}" update=":formSaldos" oncomplete="cerrarModalEspera();"/>

                    <div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4 margin-bottom-10">
                        <p:focus context="formSaldos" for="txt_almacen"/>

                        <label>Almacén</label>
                        <div class="input-group">
                            <h:inputText id="txt_almacen" class="form-control input-lg noround" value="#{saldoAlmacenMBean.almacen}" autocomplete="off" onkeypress="if (event.keyCode === 13) {
                                        abrirModalEspera();
                                        obtenerSaldoAlmacen();
                                        return false;
                                    }"/>
                            <span class="input-group-btn">
                                <button class="btn btn-primary btn-lg noround" type="button" style="font-size: 23px; padding: 9.5px 10px 4.5px 10px" onclick="abrirModalEspera(); obtenerSaldoAlmacen();">
                                    <span class="glyphicon glyphicon-search"></span>
                                </button>
                            </span>
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-lg noround" type="button" style="font-size: 23px; padding: 9.5px 10px 4.5px 10px" onclick="abrirModalEspera(); limpiar();">
                                    <span class="glyphicon glyphicon-erase"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>

                <p:messages id="msg" showDetail="true" showSummary="true"/>
                <hr/>

                <div class="row">
                    <div class="col-xs-12 center-component">
                        <h:panelGroup id="datos">
                            <div class="hidden-lg hidden-md">
                                <div class="panel-group" id="accordionMobile" role="tablist" aria-multiselectable="false">
                                    <div class="panel panel-default">
                                        <div class="panel-heading heading" role="tab" id="headingVentasMobile">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#ventasMobile" aria-expanded="true" aria-controls="ventasMobile">
                                                    Ventas <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.ventas)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="ventasMobile" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingVentasMobile">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.ventas}" var="venta">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(venta.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(venta.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{venta.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{venta.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(venta.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingClientesMobile">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#clientesMobile" aria-expanded="true" aria-controls="clientesMobile">
                                                    Clientes <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.clientes)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="clientesMobile" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingClientesMobile">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.clientes}" var="cliente">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(cliente.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(cliente.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{cliente.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{cliente.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(cliente.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingUsosMobile">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseUsosMobile" aria-expanded="true" aria-controls="collapseUsosMobile">
                                                    En uso <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.usos)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseUsosMobile" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingUsosMobile">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.usos}" var="uso">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(uso.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(uso.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{uso.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{uso.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(uso.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingInsumosMobile">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseInsumosMobile" aria-expanded="true" aria-controls="collapseInsumosMobile">
                                                    Insumos <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.insumos)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseInsumosMobile" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingInsumosMobile">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.insumos}" var="insumo">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(insumo.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(insumo.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{insumo.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{insumo.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(insumo.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingDemoMobile">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseDemoMobile" aria-expanded="true" aria-controls="collapseDemoMobile">
                                                    Demos <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.demostraciones)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseDemoMobile" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingDemoMobile">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.demostraciones}" var="demostracion">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(demostracion.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(demostracion.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{demostracion.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{demostracion.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(demostracion.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="hidden-sm hidden-xs">
                                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="false">
                                    <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingVentas">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#ventas" aria-expanded="true" aria-controls="ventas">
                                                    Ventas <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.ventas)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingClientes">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#clientes" aria-expanded="true" aria-controls="clientes">
                                                    Clientes <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.clientes)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingUsos">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseUsos" aria-expanded="true" aria-controls="collapseUsos">
                                                    En uso <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.usos)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingInsumos">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseInsumos" aria-expanded="true" aria-controls="collapseInsumos">
                                                    Insumos <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.insumos)}</span>
                                                </a>
                                            </h4>
                                        </div>
                                        <div class="panel-heading panel-mobile" role="tab" id="headingDemo">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseDemo" aria-expanded="true" aria-controls="collapseDemo">
                                                    Demos <span class="badge badge-gray">#{fn:length(saldoAlmacenMBean.demostraciones)}</span>
                                                </a>
                                            </h4>
                                        </div>

                                        <div id="ventas" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingVentas">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.ventas}" var="venta">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(venta.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(venta.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{venta.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{venta.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(venta.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div id="clientes" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingClientes">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.clientes}" var="cliente">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(cliente.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(cliente.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{cliente.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{cliente.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(cliente.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div id="collapseUsos" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingUsos">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.usos}" var="uso">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(uso.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(uso.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{uso.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{uso.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(uso.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div id="collapseInsumos" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingInsumos">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.insumos}" var="insumo">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(insumo.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(insumo.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{insumo.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{insumo.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(insumo.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <div id="collapseDemo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingDemo">
                                            <div class="panel-body">
                                                <ui:repeat value="#{saldoAlmacenMBean.demostraciones}" var="demostracion">
                                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                                        <div style="border: 1px solid #DDDDDD; padding: 5px; height: 155px">
                                                            <div class="row">
                                                                <div class="col-xs-6">
                                                                    <img class="img-responsive" src="#{imagenProductoMBean.obtenerUrlProducto(demostracion.referencia, true)}"/>
                                                                </div>
                                                                <div class="col-xs-6 right-component">
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <span style="font-size: 25px">#{baruGenericMBean.convertirARefCorta(demostracion.referencia)}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            <span class="badge badge-360-original" style="font-size: 16px">#{demostracion.cantidad}</span>
                                                                        </div>
                                                                        <div class="col-xs-12">
                                                                            #{demostracion.estado}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12 justify-component">
                                                                    #{baruGenericMBean.obtenerNombreReferencia(demostracion.referencia)}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>
                </div>

                <br/>
            </h:form>
        </div>
        <!-- script references -->
        <script src="/360/js/bootstrap.min.js"></script>
    </h:body>
</html>