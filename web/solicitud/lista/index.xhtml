<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:m="http://java.sun.com/jsf/composite/matisses"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <link href="/360/css/bootstrap.min.css" rel="stylesheet"/>
        <!--[if lt IE 9]>
                        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
                <![endif]-->
        <link href="/360/css/styles.css" rel="stylesheet"/>
        <link href="/360/css/multileveldropdown.css" rel="stylesheet"/>
        <script src="/360/js/arriba.js"></script>
        <script type="text/javascript">
            function openRuta(window_src) {
                ruta = window.open(window_src, 'newwindow', config = 'height=' + window.screen.availHeight + ',width=' + window.screen.availWidth
                        + ',toolbar=no,menubar=no,resizable=no,location=no,status=no,scrollbars=yes');
            }

            function abrirModalFinalizacion() {
                $('#modalFinalizacion').modal('show');
            }

            function cerrarModalFinalizacion() {
                $('#modalFinalizacion').modal('hide');
                $('body').removeClass('modal-open');
                $('.modal-backdrop').remove();
            }
        </script>
        <title>360 - Listar Pedidos</title>
    </h:head>

    <h:body>
        <f:event type="preRenderView" listener="#{userSessionInfoMBean.checkAlreadyLoggedin}"/>
        <m:navbar/>

        <div class="container">
            <span class="ir-arriba hidden-sm hidden-xs">
                <span class="glyphicon glyphicon-chevron-up" style="top: -2px !important"></span>
            </span>

            <h:panelGroup id="panelFinalizacion">
                <h:form id="formFinalizacion">
                    <div class="modal fade" id="modalFinalizacion">
                        <div class="modal-dialog">
                            <div class="modal-content dialog-content noround">
                                <div class="modal-header dialog-header">
                                    <h4 class="modal-title">
                                        Finalizar solicitud
                                    </h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-xs-12 justify-component">
                                            <p class="alert alert-warning">
                                                <span class="glyphicon glyphicon-alert" style="color: #F0AD4E; font-size: 16px"></span>
                                                Recuerde que al finalizar, usted se hace cargo de esta solicitud.
                                            </p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="form-group">
                                                <label>Comentario*</label>
                                                <h:inputTextarea class="input-lg form-control noround" value="#{listaSolicitudesMBean.comentario}" style="resize: none"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer dialog-footer">
                                    <div class="row">
                                        <div class="col-xs-12 right-component">
                                            <p:remoteCommand name="modal" update=":panelFinalizacion" oncomplete="cerrarModalFinalizacion(); abrirModalEspera(); finalizarSolicitud();"/>
                                            <p:remoteCommand name="finalizarSolicitud" actionListener="#{listaSolicitudesMBean.finalizarSolicitud}" update=":formPedidos" oncomplete="cerrarModalEspera();"/>

                                            <button type="button" class="btn btn-default btn-lg noround" data-dismiss="modal">
                                                Cancelar
                                            </button>
                                            <button type="button" class="btn btn-primary btn-lg noround" style="margin-left: 0px" onclick="modal();">
                                                Finalizar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </h:panelGroup>

            <h:form id="formPedidos">
                <div class="row">
                    <div class="col-xs-12">
                        <ol class="breadcrumb">
                            <li class="active">
                                <a>Pedidos</a>
                            </li>
                        </ol>
                    </div>
                </div>

                <!--Filtros normales-->
                <p:remoteCommand name="seleccionarEstado" actionListener="#{listaSolicitudesMBean.seleccionarEstado}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:filtroEstados :formPedidos:detalle :formPedidos:msg :formPedidos:paginador :formPedidos:paginadorMovil
                                 :formPedidos:filtroSucursalesMovil :formPedidos:filtroEstadosMovil"/>
                <p:remoteCommand name="seleccionarSucursal" actionListener="#{listaSolicitudesMBean.seleccionarSucursal}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:filtroSucursales :formPedidos:detalle :formPedidos:msg :formPedidos:paginador :formPedidos:filtroSucursalesMovil :formPedidos:paginadorMovil"/>
                <p:remoteCommand name="aplicarFiltroFechas" actionListener="#{listaSolicitudesMBean.aplicarFiltroFechas}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:filtroSucursales :formPedidos:msg :formPedidos:paginador :formPedidos:paginadorMovil
                                 :formPedidos:filtroSucursalesMovil"/>
                <p:remoteCommand name="aplicarFiltroFechas" actionListener="#{listaSolicitudesMBean.aplicarFiltroFechas}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:filtroSucursales :formPedidos:msg :formPedidos:paginador :formPedidos:paginadorMovil
                                 :formPedidos:filtroSucursalesMovil"/>
                <p:remoteCommand name="cambiarSizePage" actionListener="#{listaSolicitudesMBean.cambiarSizePage}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:filtroSucursales :formPedidos:datosMostrar :formPedidos:msg :formPedidos:paginador :formPedidos:paginadorMovil
                                 :formPedidos:filtroSucursalesMovil :formPedidos:datosMostrarMovil"/>

                <!--Filtros moviles-->
                <p:remoteCommand name="aplicarFiltroFechasMovil" actionListener="#{listaSolicitudesMBean.aplicarFiltroFechasMovil}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:filtroSucursales :formPedidos:filtroSucursalesMovil :formPedidos:paginador :formPedidos:paginadorMovil :formPedidos:msg"/>

                <!--Filtros paginador-->
                <p:remoteCommand name="mostrarPrimeraPagina" actionListener="#{listaSolicitudesMBean.mostrarPrimeraPagina}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:paginador :formPedidos:msg :formPedidos:paginadorMovil"/>
                <p:remoteCommand name="mostrarPaginaAnterior" actionListener="#{listaSolicitudesMBean.mostrarPaginaAnterior}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:paginador :formPedidos:msg :formPedidos:paginadorMovil"/>
                <p:remoteCommand name="mostrarPaginaEspecifica" actionListener="#{listaSolicitudesMBean.mostrarPaginaEspecifica}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:paginador :formPedidos:msg :formPedidos:paginadorMovil"/>
                <p:remoteCommand name="mostrarPaginaSiguiente" actionListener="#{listaSolicitudesMBean.mostrarPaginaSiguiente}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:paginador :formPedidos:msg :formPedidos:paginadorMovil"/>
                <p:remoteCommand name="mostrarUltimaPagina" actionListener="#{listaSolicitudesMBean.mostrarUltimaPagina}" oncomplete="cerrarModalEspera();"
                                 update=":formPedidos:detalle :formPedidos:paginador :formPedidos:msg :formPedidos:paginadorMovil"/>

                <div class="row hidden-sm hidden-xs">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <h:outputLabel value="Filtrar estado:"/>
                            <h:panelGroup id="filtroEstados">
                                <div class="dropdown">
                                    <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                            id="selEstado" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        #{listaSolicitudesMBean.estadoSeleccionado}
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selEstado">
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: ''}]);">
                                                Todos
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SP'}]);">
                                                En proceso
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SS'}]);">
                                                Solicitado
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SF'}]);">
                                                Finalizado
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SC'}]);">
                                                Cancelado
                                            </a>
                                        </li>
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'NF'}]);">
                                                No finalizado
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <div class="form-group">
                            <h:outputLabel value="Filtrar sucursal:"/>
                            <h:panelGroup id="filtroSucursales">
                                <div class="dropdown">
                                    <button type="button" style="width: 100%" id="selSucursal" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                                            class="btn btn-default dropdown-toggle input-lg noround #{userSessionInfoMBean.validarPermisoUsuario('SOLICITUDES_TODAS', 'VISUALIZAR') ? '' : 'disabled'}">
                                        #{listaSolicitudesMBean.sucursalSeleccionada}
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selSucursal">
                                        <li>
                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarSucursal([{name: 'asesor', value: ''}]);">
                                                Todos
                                            </a>
                                        </li>
                                        <ui:repeat value="#{listaSolicitudesMBean.sucursales}" var="sucursal">
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarSucursal([{name: 'sucursal', value: '#{sucursal[0]}'}]);">
                                                    #{sucursal[1]}
                                                </a>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-5">
                        <div class="form-group">
                            <h:outputLabel value="Filtrar fecha:"/>
                            <div class="input-group">
                                <p:calendar id="fechaInicio" value="#{listaSolicitudesMBean.fechaInicial}" pattern="dd-MM-yyyy" class="input-lg mask" pt:placeholder="Fecha Inicial">
                                    <p:ajax event="dateSelect" rendered=":formPedidos:fechaInicio"/>
                                </p:calendar>
                                <span class="input-group-addon noround" style="border-left:  none; border-right: none"> a </span>
                                <p:calendar id="fechaFin" value="#{listaSolicitudesMBean.fechaFinal}" pattern="dd-MM-yyyy" class="input-lg mask" pt:placeholder="Fecha Final">
                                    <p:ajax event="dateSelect" rendered=":formPedidos:fechaFin"/>
                                </p:calendar>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary btn-lg noround" onclick="abrirModalEspera(); aplicarFiltroFechas();">
                                        <span class="glyphicon glyphicon-ok"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-5 col-md-offset-1">
                        <div class="form-group">
                            <h:outputLabel value="Datos mostrar: "/>
                            <h:panelGroup id="datosMostrar">
                                <div class="input-group">
                                    <div class="dropdown">
                                        <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                                id="selSizePage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                            #{listaSolicitudesMBean.sizePage}
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selSizePage">
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '12'}]);">
                                                    12
                                                </a>
                                            </li>
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '24'}]);">
                                                    24
                                                </a>
                                            </li>
                                            <li>
                                                <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '48'}]);">
                                                    48
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <span class="input-group-addon input-group-matisses noround">x pag.</span>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-6 center-component" style="top: 25px">
                        <div class="form-group">
                            <h:panelGroup id="paginador">
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPrimeraPagina();">
                                        1
                                    </button>
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaAnterior();">
                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                    </button>
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default dropdown-toggle btn-lg noround" data-toggle="dropdown"
                                                aria-haspopup="true" aria-expanded="false">
                                            #{listaSolicitudesMBean.pagina} de #{listaSolicitudesMBean.totalPaginas}
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" style="max-height: 165px; overflow-y: auto">
                                            <ui:repeat value="#{listaSolicitudesMBean.paginas}" var="pagina">
                                                <li>
                                                    <a class="pointer-cursor" onclick="abrirModalEspera(); mostrarPaginaEspecifica([{name: 'pagina', value: '#{pagina}'}])">
                                                        #{pagina}
                                                    </a>
                                                </li>
                                            </ui:repeat>
                                        </ul>
                                    </div>
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaSiguiente();">
                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                    </button>
                                    <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarUltimaPagina();">
                                        #{listaSolicitudesMBean.totalPaginas}
                                    </button>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
                <div class="row hidden-lg hidden-md margin-bottom-10">
                    <div class="col-xs-12 margin-bottom-10">
                        <p:remoteCommand name="mostrarFiltrosMovil" actionListener="#{listaSolicitudesMBean.mostrarFiltrosMovil}" update=":formPedidos:btnFitros"/>
                        <h:panelGroup id="btnFitros">
                            <button type="button" class="btn btn-default btn-lg form-control noround" style="height: 46px" data-toggle="collapse" data-target="#collapseFiltros"
                                    onclick="mostrarFiltrosMovil();">
                                <div class="col-xs-10">
                                    Filtros <span class="glyphicon glyphicon-filter"></span>
                                </div>
                                <div class="col-xs-2 right-component">
                                    <span class="glyphicon #{listaSolicitudesMBean.mostrarFiltros ? 'glyphicon-triangle-top' : 'glyphicon-triangle-bottom'}"></span>
                                </div>
                            </button>
                        </h:panelGroup>
                    </div>
                    <div style="padding: 0 15px">
                        <div class="collapse" id="collapseFiltros">
                            <div class="col-xs-12" style="padding: 0 0px; background-color: #DDDDDD; padding-top: 10px">
                                <div class="col-xs-12 col-sm-6 col-md-3">
                                    <div class="form-group">
                                        <h:outputLabel value="Filtrar estado:"/>
                                        <h:panelGroup id="filtroEstadosMovil">
                                            <div class="dropdown">
                                                <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                                        id="selEstado" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                    #{listaSolicitudesMBean.estadoSeleccionado}
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selEstado">
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: ''}]);">
                                                            Todos
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SP'}]);">
                                                            En proceso
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SS'}]);">
                                                            Solicitado
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SF'}]);">
                                                            Finalizado
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'SC'}]);">
                                                            Cancelado
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarEstado([{name: 'estado', value: 'NF'}]);">
                                                            No finalizado
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-4">
                                    <div class="form-group">
                                        <h:outputLabel value="Filtrar sucursal:"/>
                                        <h:panelGroup id="filtroSucursalesMovil">
                                            <div class="dropdown">
                                                <button type="button" style="width: 100%" id="selSucursal" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                                                        class="btn btn-default dropdown-toggle input-lg noround #{userSessionInfoMBean.validarPermisoUsuario('SOLICITUDES_TODAS', 'VISUALIZAR') ? '' : 'disabled'}">
                                                    #{listaSolicitudesMBean.sucursalSeleccionada}
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selSucursal">
                                                    <li>
                                                        <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarSucursal([{name: 'sucursal', value: ''}]);">
                                                            Todos
                                                        </a>
                                                    </li>
                                                    <ui:repeat value="#{listaSolicitudesMBean.sucursales}" var="sucursal">
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); seleccionarSucursal([{name: 'sucursal', value: '#{sucursal[0]}'}]);">
                                                                #{sucursal[1]}
                                                            </a>
                                                        </li>
                                                    </ui:repeat>
                                                </ul>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-5">
                                    <div class="form-group">
                                        <h:outputLabel value="Filtrar fecha:"/>
                                        <div class="input-group">
                                            <h:inputText class="form-control input-lg noround center-component" pt:placeholder="dd/mm/aaaa" value="#{listaSolicitudesMBean.fechaInicialMovil}"
                                                         style="font-size: 15px !important">
                                                <f:ajax event="change"/>
                                            </h:inputText>
                                            <span class="input-group-addon noround" style="border-left:  none; border-right: none"> a </span>
                                            <h:inputText class="form-control input-lg noround center-component" pt:placeholder="dd/mm/aaaa" value="#{listaSolicitudesMBean.fechaFinalMovil}"
                                                         style="font-size: 15px !important">
                                                <f:ajax event="change"/>
                                            </h:inputText>
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-primary btn-lg noround" onclick="abrirModalEspera(); aplicarFiltroFechasMovil();">
                                                    <span class="glyphicon glyphicon-ok"></span>
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <h:outputLabel value="Datos mostrar: "/>
                                        <h:panelGroup id="datosMostrarMovil">
                                            <div class="input-group">
                                                <div class="dropdown">
                                                    <button type="button" class="btn btn-default dropdown-toggle input-lg noround" style="width: 100%"
                                                            id="selSizePage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        #{listaSolicitudesMBean.sizePage}
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu dropdown-menu-size" aria-labelledby="selSizePage">
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '12'}]);">
                                                                12
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '24'}]);">
                                                                24
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a class="pointer-cursor" onclick="abrirModalEspera(); cambiarSizePage([{name: 'sizePage', value: '48'}]);">
                                                                48
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <span class="input-group-addon input-group-matisses noround">x pag.</span>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-6 center-component margin-bottom-10">
                                    <div class="form-group">
                                        <h:panelGroup id="paginadorMovil">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPrimeraPagina();">
                                                    1
                                                </button>
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaAnterior();">
                                                    <span class="glyphicon glyphicon-chevron-left"></span>
                                                </button>
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-default dropdown-toggle btn-lg noround" data-toggle="dropdown"
                                                            aria-haspopup="true" aria-expanded="false">
                                                        #{listaSolicitudesMBean.pagina} de #{listaSolicitudesMBean.totalPaginas}
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" style="max-height: 165px; overflow-y: auto">
                                                        <ui:repeat value="#{listaSolicitudesMBean.paginas}" var="pagina">
                                                            <li>
                                                                <a onclick="abrirModalEspera();
                                                                        mostrarPaginaEspecifica([{name: 'pagina', value: '#{pagina}'}])" style="cursor: pointer">
                                                                    #{pagina}
                                                                </a>
                                                            </li>
                                                        </ui:repeat>
                                                    </ul>
                                                </div>
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera();
                                                        mostrarPaginaSiguiente();">
                                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                                </button>
                                                <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera();
                                                        mostrarUltimaPagina();">
                                                    #{listaSolicitudesMBean.totalPaginas}
                                                </button>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <hr/>

                <p:messages id="msg" showDetail="true" showSummary="true"/>

                <div class="row">
                    <div class="col-xs-12 right-component margin-bottom-10">
                        <h:panelGroup id="btns">
                            <button type="button" class="btn btn-default btn-lg noround #{listaSolicitudesMBean.solicitud.estado eq 'SS' ? '' : 'disabled btn-deshabilitado'}" onclick="abrirModalFinalizacion();">
                                Finalizar
                            </button>
                            <button type="button" onclick="#{listaSolicitudesMBean.abrirPdf()}"
                                    class="btn btn-primary btn-lg noround #{listaSolicitudesMBean.solicitud.idSolicitud eq null or listaSolicitudesMBean.solicitud.idSolicitud eq 0
                                                                            ? 'disabled btn-deshabilitado' : ''}">
                                PDF
                            </button>
                        </h:panelGroup>
                    </div>
                </div>

                <div class="row">
                    <p:remoteCommand name="seleccionarSolicitud" actionListener="#{listaSolicitudesMBean.seleccionarSolicitud}" update=":formPedidos:detalle :formPedidos:btns"
                                     oncomplete="cerrarModalEspera();"/>

                    <h:panelGroup id="detalle">
                        <ui:repeat value="#{listaSolicitudesMBean.solicitudes}" var="solicitud">
                            <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10">
                                <div class="pointer-cursor #{listaSolicitudesMBean.solicitud.idSolicitud eq solicitud.idSolicitud ? 'contenedor-pedidos-activo' : 'contenedor-pedidos'}"
                                     onclick="abrirModalEspera(); seleccionarSolicitud([{name: 'idSolicitud', value: '#{solicitud.idSolicitud}'}]);">
                                    <div class="row">
                                        <div class="col-xs-12 center-component">
                                            <b style="font-size: 26px">#{solicitud.sucursal}</b>
                                            <br/>
                                            #{baruGenericMBean.obtenerNombreWebAlmacen(solicitud.sucursal)}
                                        </div>
                                    </div>
                                    <hr style="border-bottom: 1px solid #BF0039; margin-top: 15px; margin-bottom: 15px"/>
                                    <div class="row">
                                        <div class="col-xs-12 center-component" style="height: 50px">
                                            #{baruGenericMBean.obtenerNombreEmpleadoCedula(solicitud.autor)}
                                            <br/>
                                            <b>Autor</b>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 center-component" style="height: 50px">
                                            #{solicitud.usuarioResponsable}
                                            <br/>
                                            <b>Usuario responsable</b>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 center-component" style="font-size: 25px; margin-top: 10px">
                                            <b style="color: #BF0039">
                                                #{solicitud.estado eq 'SP' ? 'EN PROCESO' : solicitud.estado eq 'SF' ? 'FINALIZADO' : solicitud.estado eq 'SC' ?
                                                  'CANCELADO' : solicitud.estado eq 'SS' ? 'SOLICITADO' : solicitud.estado eq 'NF' ? 'NO FINALIZADO' : 'SIN ESTADO'}
                                            </b>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-6 center-component" style="font-size: 15px; border-right: 1px solid #BF0039; margin-top: 10px">
                                            #{solicitud.idSolicitud}
                                        </div>
                                        <div class="col-xs-6 center-component" style="font-size: 15px; margin-top: 10px">
                                            <h:outputText value="#{solicitud.fechaFinal}">
                                                <f:convertDateTime parent="yyyy-MM-dd"/>
                                            </h:outputText>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ui:repeat>
                    </h:panelGroup>
                </div>

            </h:form>
        </div>
        <!-- script references -->
        <script src="/360/js/bootstrap.min.js"></script>
    </h:body>
</html>