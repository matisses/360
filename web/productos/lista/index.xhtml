<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:m="http://java.sun.com/jsf/composite/matisses"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <link href="/360/css/bootstrap.min.css" rel="stylesheet"/>
        <!--[if lt IE 9]>
                        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
                <![endif]-->
        <link href="/360/css/styles.css" rel="stylesheet"/>
        <link href="/360/css/multileveldropdown.css" rel="stylesheet"/>
        <script type="text/javascript">
            function abrirModalDetalleArticulo() {
                $('#modalDetalleArticulo').modal('show');
            }
        </script>
        <title>360 - Lista Inventario</title>
    </h:head>
    <h:body>
        <f:event type="preRenderView" listener="#{userSessionInfoMBean.checkAlreadyLoggedin}"/>
        <m:navbar/>
        <p:focus for=":formFiltrosLaterales:txtBusqueda"/>
        <div class="container-fluid">
            <h:panelGroup id="panelDetalleArticulo">
                <div class="modal fade" id="modalDetalleArticulo">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content dialog-content noround">
                            <div class="modal-header dialog-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    &times;
                                </button>
                                <h4 class="modal-title">
                                    Detalle Artículo
                                </h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <ul id="tabs" class="nav nav-pills">
                                            <li class="active noround pointer-cursor #{empty listaProductosMBean.saldos or listaProductosMBean.saldos eq null ? 'hidden' : ''}">
                                                <a href="#tab_saldos" data-toggle="pill" class="input-lg noround">
                                                    Saldos
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor">
                                                <a href="#tab_imagen" data-toggle="pill" class="input-lg noround">
                                                    Imagen
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor
                                                #{empty listaProductosMBean.plantilla or listaProductosMBean.plantilla eq null or listaProductosMBean.plantilla.contains('no_image') ? 'hidden' : ''}">
                                                <a href="#tab_plantilla" data-toggle="pill" class="input-lg noround">
                                                    Plantilla
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor hidden-sm hidden-xs
                                                #{empty listaProductosMBean.tresSesenta or listaProductosMBean.tresSesenta eq null or listaProductosMBean.tresSesenta.contains('no_image') ? 'hidden' : ''}">
                                                <a href="#tab_360" data-toggle="pill" class="input-lg noround">
                                                    360
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor hidden-sm hidden-xs
                                                #{empty listaProductosMBean.wow or listaProductosMBean.wow eq null or listaProductosMBean.wow.contains('no_image') ? 'hidden' : ''}">
                                                <a href="#tab_wow" data-toggle="pill" class="input-lg noround">
                                                    WOW
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor #{empty listaProductosMBean.itemsSimilares or listaProductosMBean.itemsSimilares eq null ? 'hidden' : ''}">
                                                <a href="#tab_similares" data-toggle="pill" class="input-lg noround">
                                                    Similares
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor hidden-sm hidden-xs #{empty listaProductosMBean.descuentos or listaProductosMBean.descuentos eq null ? 'hidden' : ''}">
                                                <a href="#tab_descuentos" data-toggle="pill" class="input-lg noround">
                                                    Descuentos
                                                </a>
                                            </li>
                                            <li class="noround pointer-cursor">
                                                <a href="#tab_otros" data-toggle="pill" class="input-lg noround">
                                                    Otros
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <br/>

                                <div class="tab-content">
                                    <div class="tab-pane active" id="tab_saldos">
                                        <div class="row">
                                            <div class="col-xs-12 margin-bottom-10" style="padding: 0 40px 0 40px; max-height: 270px; overflow-y: auto; overflow-x: hidden">
                                                <ui:repeat value="#{listaProductosMBean.saldos}" var="saldo">
                                                    <div class="row">
                                                        <div class="col-xs-6 center-component" style="font-size: 17px">
                                                            <b>Almacén: #{saldo.almacen}</b>
                                                        </div>
                                                        <div class="col-xs-6 center-component" style="font-size: 17px">
                                                            <b>Cantidad total: #{saldo.cantidad}</b>
                                                        </div>
                                                    </div>
                                                    <hr/>
                                                    <div class="row">
                                                        <div class="col-xs-12 margin-bottom-10" style="padding: 0 40px 0 40px">
                                                            <div class="row">
                                                                <ui:repeat value="#{saldo.saldoUbicacion}" var="ubicacion">
                                                                    <div class="col-xs-12 col-md-6 col-lg-4 margin-bottom-10">
                                                                        <div style="border: 1px solid #DDDDDD; padding: 5px">
                                                                            <div class="row">
                                                                                <div class="col-xs-9 col-md-8 center-component" style="font-size: 17px">
                                                                                    #{ubicacion.binCode}
                                                                                </div>
                                                                                <div class="col-xs-3 col-md-4 right-component" style="font-size: 17px; border-left: 1px solid #BF0039">
                                                                                    #{ubicacion.onHandQty}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </ui:repeat>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr/>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_imagen">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div id="image" class="carousel slide">
                                                    <ol class="carousel-indicators">
                                                        <ui:repeat value="#{listaProductosMBean.imagenes}" var="image">
                                                            <li data-target="#image" data-slide-to="#{image[1]}" class="#{image[1] eq '0' ? 'active' : ''}"></li>
                                                        </ui:repeat>
                                                    </ol>

                                                    <div class="carousel-inner">
                                                        <ui:repeat value="#{listaProductosMBean.imagenes}" var="image">
                                                            <div class="item #{image[1] eq '0' ? 'active' : ''}">
                                                                <img src="#{image[0]}" class="img-responsive" style="max-height: 400px"/>
                                                            </div>
                                                        </ui:repeat>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_plantilla">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <img src="#{listaProductosMBean.plantilla}" class="img-responsive" style="max-height: 400px"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_360">
                                        <div class="row">
                                            <div class="col-xs-12 center-component">
                                                <iframe src="#{listaProductosMBean.tresSesenta}" width="655px" height="485px" style="border: none"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_wow">
                                        <div class="row">
                                            <div class="col-xs-12 center-component">
                                                <iframe src="#{listaProductosMBean.wow}" width="655px" height="485px" style="border: none"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_similares">
                                        <div class="row">
                                            <ui:repeat value="#{listaProductosMBean.itemsSimilares}" var="item">
                                                <div class="col-xs-4 col-sm-3 col-md-2 center-component">
                                                    <div style="border: 1px solid #DDDDDD; margin: 7px" class="pointer-cursor" onclick="seleccionarItem([{name: 'item', value: '#{item[1]}'}]);">
                                                        <div class="row">
                                                            <div class="col-xs-12">
                                                                <img src="#{item[0]}"/>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12">
                                                                #{baruGenericMBean.convertirARefCorta(item[1])}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ui:repeat>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_descuentos">
                                        <div class="row">
                                            <div class="col-xs-12" style="max-height: 270px; overflow-y: auto; overflow-x: hidden">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <th class="head-tabla">
                                                            Canal
                                                        </th>
                                                        <th class="head-tabla">
                                                            % Descuento
                                                        </th>
                                                        <th class="head-tabla">
                                                            V. con desc
                                                        </th>
                                                        <th class="head-tabla">
                                                            V. sin desc
                                                        </th>
                                                        <th class="head-tabla">
                                                            Válido hasta
                                                        </th>
                                                    </tr>
                                                    <ui:repeat value="#{listaProductosMBean.descuentos}" var="descuento">
                                                        <tr>
                                                            <td class="center-component">
                                                                #{descuento.canal eq 'SA' ? 'SAP' : descuento.canal eq 'PO' ? 'POS' : descuento.canal eq 'WE' ? 'WEB' : descuento.canal eq 'LR'
                                                                  ? 'LISTA REGALOS' : descuento.canal eq 'ML' ? 'MERCADOLIBRE' : descuento.canal eq 'TS' ? '360' : ''}
                                                            </td>
                                                            <td class="center-component" style="color: #BF0039">
                                                                <b>#{descuento.porcentaje}%</b>
                                                            </td>
                                                            <td class="center-component" style="color: #BF0039">
                                                                <h:outputText value="#{baruGenericMBean.obtenerPrecioVenta(listaProductosMBean.referencia) -
                                                                                       ((baruGenericMBean.obtenerPrecioVenta(listaProductosMBean.referencia) / 100) * (descuento.porcentaje))}">
                                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="COP" maxFractionDigits="0"/>
                                                                </h:outputText>
                                                            </td>
                                                            <td class="center-component" style="color: #BF0039">
                                                                <h:outputText value="#{baruGenericMBean.obtenerPrecioVenta(listaProductosMBean.referencia)}">
                                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="COP" maxFractionDigits="0"/>
                                                                </h:outputText>
                                                            </td>
                                                            <td class="center-component">
                                                                <h:outputText value="#{descuento.fechaFin}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"/>
                                                                </h:outputText>
                                                            </td>
                                                        </tr>
                                                    </ui:repeat>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_otros">
                                        <div class="row">
                                            <div class="col-xs-12" style="max-height: 270px; overflow-y: auto; overflow-x: hidden">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <h3>
                                                            Descripción
                                                        </h3>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 justify-component" style="font-size: 17px">
                                                        <h:outputText value="#{listaProductosMBean.descripcion}" escape="false"/>
                                                    </div>
                                                </div>
                                                <hr/>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <h3>
                                                            Materiales y Cuidados
                                                        </h3>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <ui:repeat value="#{listaProductosMBean.materiales}" var="material">
                                                            <div class="row">
                                                                <div class="col-xs-12">
                                                                    <div class="row">
                                                                        <div class="col-xs-2 col-md-1 right-component">
                                                                            <span class="glyphicon glyphicon-chevron-right"></span>
                                                                        </div>
                                                                        <div class="col-xs-10 col-md-11">
                                                                            <span style="font-size: 17px">
                                                                                <b>#{material.name}</b>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class=" col-xs-10 col-xs-offset-2 col-md-11 col-md-offset-1 justify-component">
                                                                            <span style="font-size: 17px">
                                                                                #{material.cuidados}
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ui:repeat>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer dialog-footer">
                                <div class="row">
                                    <div class="col-xs-12 right-component">
                                        <button type="button" class="btn btn-default btn-lg noround" data-dismiss="modal">
                                            Cerrar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:panelGroup>

            <div class="row">
                <div class="col-md-3 hidden-xs hidden-sm" style="background-color: #DDDDDD">
                    <h:form id="formFiltrosLaterales">
                        <div class="row">
                            <div class="col-xs-12 margin-bottom-10" style="margin-top: 15px">
                                <h:panelGroup id="chk_conSaldo">
                                    <p:remoteCommand name="filtrarProductosSaldo" actionListener="#{listaProductosMBean.filtrarProductosSaldo}" oncomplete="cerrarModalEspera();"
                                                     update=":formFiltrosLaterales:chk_conSaldo :formFiltrosLaterales:filtros :formLista:listaProductos
                                                     :formFiltrosSuperiores :datos :formFiltrosMovil:chk_conSaldo"/>
                                    <span class="glyphicon #{listaProductosMBean.soloConSaldo ? 'glyphicon-check' : 'glyphicon-unchecked'} margin-bottom-10 checkbox-proforma"
                                          onclick="abrirModalEspera(); filtrarProductosSaldo();"></span>
                                    <h:outputLabel value="Productos con saldo" class="label-normal" onclick="abrirModalEspera(); filtrarProductosSaldo();"/>
                                </h:panelGroup>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 margin-bottom-10">
                                <div class="form-group">
                                    <p:remoteCommand name="filtrarTexto" actionListener="#{listaProductosMBean.filtrarProductosTexto}" update=":formLista:listaProductos :formFiltrosSuperiores :datos"
                                                     oncomplete="cerrarModalEspera();"/>
                                    <h:inputText value="#{listaProductosMBean.filtroTexto}" pt:placeholder="Parámetro busqueda"
                                                 id="txtBusqueda" class="form-control input-lg noround" autocomplete="off"
                                                 onkeypress="if (event.keyCode === 13) {
                                                             abrirModalEspera();
                                                             filtrarTexto();
                                                             return false;
                                                         }"/>
                                </div>
                            </div>
                        </div>
                        <h:panelGroup id="filtros">
                            <p:remoteCommand name="seleccionarFiltro" actionListener="#{listaProductosMBean.seleccionarFiltro}"
                                             update=":formFiltrosLaterales:filtros :formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosMovil:chk_conSaldo :formFiltrosMovil:filtros"
                                             oncomplete="cerrarModalEspera();"/>
                            <ui:fragment rendered="#{not empty listaProductosMBean.filtros}">
                                <div class="row">
                                    <div class="col-xs-12 margin-bottom-10">
                                        <h4 style="font-weight: bold">
                                            FILTROS
                                        </h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12 margin-bottom-10">
                                        <ui:repeat value="#{listaProductosMBean.filtros.entrySet().toArray()}" var="filtro">
                                            <ui:repeat value="#{filtro.value}" var="valorFiltro">
                                                <div class="row">
                                                    <div class="col-xs-12 margin-bottom-7">
                                                        <div style="background-color: #6B6B6B; padding: 8px; color: #FFFFFF; font-size: 17px;">
                                                            <div class="row">
                                                                <div class="col-xs-10">
                                                                    #{valorFiltro}
                                                                </div>
                                                                <div class="col-xs-2 right-component pointer-cursor">
                                                                    <span class="glyphicon glyphicon-remove-circle" style="top: 3px"
                                                                          onclick="abrirModalEspera(); seleccionarFiltro([{name: 'filtro', value: '#{filtro.key}'}, {name: 'valor', value: '#{valorFiltro}'}]);"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ui:repeat>
                                        </ui:repeat>
                                    </div>
                                </div>
                            </ui:fragment>
                            <div class="row">
                                <div class="col-xs-12">
                                    <ui:repeat value="#{listaProductosMBean.filtrosIzquierda.entrySet().toArray()}" var="map">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <h4 style="font-weight: bold">
                                                            #{map.key}
                                                        </h4>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <div class="pointer-cursor filtro-lista">
                                                            <ui:repeat value="#{map.value.entrySet().toArray()}" var="value">
                                                                <div class="row" onclick="abrirModalEspera(); seleccionarFiltro([{name: 'filtro', value: '#{map.key}'}, {name: 'valor', value: '#{value.key}'}]);">
                                                                    <div class="col-xs-2" style="top: 3px">
                                                                        <span class="glyphicon #{value.value ? 'glyphicon-check' : 'glyphicon-unchecked'} checkbox-proforma"></span>
                                                                    </div>
                                                                    <div class="col-xs-10">
                                                                        <span style="font-size: 17px">
                                                                            #{value.key}
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </ui:repeat>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr/>
                                    </ui:repeat>
                                </div>
                            </div>
                        </h:panelGroup>
                    </h:form>
                </div>
                <div class="col-xs-12 col-md-9">
                    <div class="row hidden-md hidden-lg">
                        <div class="col-xs-12">
                            <h:form id="formFiltrosMovil">
                                <div class="row">
                                    <div class="col-xs-12 margin-bottom-10">
                                        <p:remoteCommand name="mostrarFiltrosMovil" actionListener="#{listaProductosMBean.mostrarFiltrosMovil}" update=":formFiltrosMovil:btnFiltros"/>
                                        <h:panelGroup id="btnFiltros">
                                            <button type="button" class="btn btn-default btn-lg form-control noround" style="height: 46px" data-toggle="collapse" data-target="#collapseFiltros"
                                                    onclick="mostrarFiltrosMovil();">
                                                <div class="row">
                                                    <div class="col-xs-10">
                                                        Filtros <span class="glyphicon glyphicon-filter"></span>
                                                    </div>
                                                    <div class="col-xs-2 right-component">
                                                        <span class="glyphicon #{listaProductosMBean.mostrarFiltros ? 'glyphicon-triangle-top' : 'glyphicon-triangle-bottom'}"></span>
                                                    </div>
                                                </div>
                                            </button>
                                        </h:panelGroup>
                                    </div>
                                </div>

                                <div class="collapse" id="collapseFiltros">
                                    <div class="row">
                                        <div class="col-xs-12 margin-bottom-10">
                                            <div style="background-color: #DDDDDD; padding: 0 15px">
                                                <div class="row">
                                                    <div class="col-xs-12 margin-bottom-10" style="margin-top: 15px">
                                                        <h:panelGroup id="chk_conSaldo">
                                                            <p:remoteCommand name="filtrarProductosSaldo" actionListener="#{listaProductosMBean.filtrarProductosSaldo}" oncomplete="cerrarModalEspera();"
                                                                             update=":formFiltrosMovil:chk_conSaldo :formFiltrosMovil:filtros :formLista:listaProductos
                                                                             :formFiltrosSuperiores :datos :formFiltrosLaterales:chk_conSaldo"/>
                                                            <span class="glyphicon #{listaProductosMBean.soloConSaldo ? 'glyphicon-check' : 'glyphicon-unchecked'} margin-bottom-10 checkbox-proforma"
                                                                  onclick="abrirModalEspera(); filtrarProductosSaldo();"></span>
                                                            <h:outputLabel value="Productos con saldo" class="label-normal" onclick="abrirModalEspera(); filtrarProductosSaldo();"/>
                                                        </h:panelGroup>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 margin-bottom-10">
                                                        <div class="form-group">
                                                            <p:remoteCommand name="filtrarTextoMovil" actionListener="#{listaProductosMBean.filtrarProductosTexto}" oncomplete="cerrarModalEspera();"
                                                                             update=":formLista:listaProductos :formFiltrosSuperiores :datos"/>
                                                            <h:inputText value="#{listaProductosMBean.filtroTexto}" pt:placeholder="Parámetro busqueda"
                                                                         id="txtBusqueda" class="form-control input-lg noround" autocomplete="off"
                                                                         onkeypress="if (event.keyCode === 13) {
                                                                                     abrirModalEspera();
                                                                                     filtrarTextoMovil();
                                                                                     return false;
                                                                                 }"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <h:panelGroup id="filtros">
                                                    <p:remoteCommand name="seleccionarFiltroMoviles" actionListener="#{listaProductosMBean.seleccionarFiltro}" oncomplete="cerrarModalEspera();"
                                                                     update=":formFiltrosMovil:filtros :formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosLaterales:chk_conSaldo
                                                                     :formFiltrosLaterales:filtros"/>
                                                    <ui:fragment rendered="#{not empty listaProductosMBean.filtros and listaProductosMBean.filtros ne null}">
                                                        <div class="row">
                                                            <div class="col-xs-12 margin-bottom-10">
                                                                <h4 style="font-weight: bold">
                                                                    FILTROS
                                                                </h4>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 margin-bottom-10">
                                                                <ui:repeat value="#{listaProductosMBean.filtros.entrySet().toArray()}" var="filtro">
                                                                    <ui:repeat value="#{filtro.value}" var="valorFiltro">
                                                                        <div class="row">
                                                                            <div class="col-xs-12 margin-bottom-7">
                                                                                <div style="background-color: #6B6B6B; padding: 8px; color: #FFFFFF; font-size: 17px;">
                                                                                    <div class="row">
                                                                                        <div class="col-xs-10">
                                                                                            #{valorFiltro}
                                                                                        </div>
                                                                                        <div class="col-xs-2 right-component pointer-cursor">
                                                                                            <span class="glyphicon glyphicon-remove-circle" style="top: 3px"
                                                                                                  onclick="abrirModalEspera();
                                                                                                          seleccionarFiltroMoviles([{name: 'filtro', value: '#{filtro.key}'},
                                                                                                              {name: 'valor', value: '#{valorFiltro}'}]);"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ui:repeat>
                                                                </ui:repeat>
                                                            </div>
                                                        </div>
                                                    </ui:fragment>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <ui:repeat value="#{listaProductosMBean.filtrosIzquierda.entrySet().toArray()}" var="map">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class="row">
                                                                            <div class="col-xs-12">
                                                                                <h4 style="font-weight: bold">
                                                                                    #{map.key}
                                                                                </h4>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-xs-12">
                                                                                <div class="pointer-cursor filtro-lista">
                                                                                    <ui:repeat value="#{map.value.entrySet().toArray()}" var="value">
                                                                                        <div class="row" onclick="abrirModalEspera();
                                                                                                seleccionarFiltroMoviles([{name: 'filtro', value: '#{map.key}'}, {name: 'valor', value: '#{value.key}'}]);">
                                                                                            <div class="col-xs-2" style="top: 3px">
                                                                                                <span class="glyphicon #{value.value ? 'glyphicon-check' : 'glyphicon-unchecked'} checkbox-proforma"></span>
                                                                                            </div>
                                                                                            <div class="col-xs-10">
                                                                                                <span style="font-size: 17px">
                                                                                                    #{value.key}
                                                                                                </span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </ui:repeat>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <hr/>
                                                            </ui:repeat>
                                                        </div>
                                                    </div>
                                                </h:panelGroup>
                                                <div class="row">
                                                    <div class="col-xs-12 margin-bottom-10">
                                                        <button type="button" class="btn btn-default btn-lg form-control noround" style="height: 46px" data-toggle="collapse" data-target="#collapseFiltros"
                                                                onclick="mostrarFiltrosMovil();">
                                                            Cerrar Filtros
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </div>
                    <div class="row">
                        <h:form id="formFiltrosSuperiores" class="form-inline">
                            <div class="col-xs-12 col-md-4 margin-bottom-10 center-component">
                                <div class="form-group">
                                    <p:remoteCommand name="ordenarProductos" actionListener="#{listaProductosMBean.ordenarProductos}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <div class="input-group">
                                        <span class="input-group-addon input-group-matisses noround">Ordenar por</span>
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle input-lg noround" type="button" style="width: 100%"
                                                    id="selOrdenar" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                #{listaProductosMBean.ordenarPor}
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" aria-labelledby="selOrdenar">
                                                <li class="pointer-cursor">
                                                    <a  onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'NUEVO'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Más nuevos primero
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'NUEVO'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Más nuevos al final
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'REFERENCIA'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Referencia menor a mayor
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'REFERENCIA'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Referencia mayor a menor
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'PRECIO'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Precio menor a mayor
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'PRECIO'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Precio mayor a menor
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'SALDO'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Saldo menor a mayor
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'SALDO'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Saldo mayor a menor
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <span class="input-group-btn">
                                            <p:remoteCommand name="alternarOrden" actionListener="#{listaProductosMBean.alternarOrden}" oncomplete="cerrarModalEspera();"
                                                             update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior"/>
                                            <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); alternarOrden();">
                                                <span class="glyphicon #{listaProductosMBean.sortOrder eq 'ASC' ? 'glyphicon-sort-by-order' :
                                                                         (listaProductosMBean.sortOrder eq 'DESC' ? 'glyphicon-sort-by-order-alt' : null)}"></span>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-md-3 margin-bottom-10 center-component">
                                <div class="form-group">
                                    <p:remoteCommand name="cambiarTamanoPagina" actionListener="#{listaProductosMBean.cambiarTamanoPagina}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <div class="input-group">
                                        <span class="input-group-addon input-group-matisses noround">Mostrar</span>
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle input-lg noround" type="button" style="width: 100%"
                                                    id="selTamanoPagina" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                #{listaProductosMBean.tamanoPagina}
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" aria-labelledby="selTamanoPagina">
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); cambiarTamanoPagina([{name: 'tamanoPagina', value: '12'}])">
                                                        12
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); cambiarTamanoPagina([{name: 'tamanoPagina', value: '24'}])">
                                                        24
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); cambiarTamanoPagina([{name: 'tamanoPagina', value: '48'}])">
                                                        48
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <span class="input-group-addon input-group-matisses noround">x pag.</span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-md-5 margin-bottom-10 center-component">
                                <div class="form-group">
                                    <p:remoteCommand name="mostrarPrimeraPagina" actionListener="#{listaProductosMBean.mostrarPrimeraPagina}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <p:remoteCommand name="mostrarPaginaAnterior" actionListener="#{listaProductosMBean.mostrarPaginaAnterior}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <p:remoteCommand name="mostrarPaginaSiguiente" actionListener="#{listaProductosMBean.mostrarPaginaSiguiente}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <p:remoteCommand name="mostrarUltimaPagina" actionListener="#{listaProductosMBean.mostrarUltimaPagina}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <p:remoteCommand name="mostrarPagina" actionListener="#{listaProductosMBean.mostrarPagina}"
                                                     update=":formLista:listaProductos :formFiltrosSuperiores :datos :formFiltrosInferior" oncomplete="cerrarModalEspera();"/>
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPrimeraPagina();">
                                            1
                                        </button>
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaAnterior();">
                                            <span class="glyphicon glyphicon-chevron-left"></span>
                                        </button>
                                        <div class="btn-group" role="group">
                                            <button type="button" class="btn btn-default dropdown-toggle btn-lg" data-toggle="dropdown" 
                                                    aria-haspopup="true" aria-expanded="false">
                                                #{listaProductosMBean.pagina} de #{listaProductosMBean.totalPaginas}
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" style="max-height: 165px; overflow-y: auto;">
                                                <ui:repeat value="#{listaProductosMBean.paginas}" var="p">
                                                    <li class="pointer-cursor">
                                                        <a onclick="abrirModalEspera(); mostrarPagina([{name: 'pagina', value: '#{p}'}])">
                                                            #{p}
                                                        </a>
                                                    </li>
                                                </ui:repeat>
                                            </ul>
                                        </div>
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaSiguiente();">
                                            <span class="glyphicon glyphicon-chevron-right"></span>
                                        </button>
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarUltimaPagina();">
                                            #{listaProductosMBean.totalPaginas}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </h:form>
                    </div>
                    <h:panelGroup id="datos">
                        <h:panelGroup rendered="#{listaProductosMBean.totalRegistros gt 0}">
                            <div class="row">
                                <div class="col-xs-12 center-component">
                                    <p style="color: #6B6B6B; font-size: 17px">
                                        Artículos #{((listaProductosMBean.pagina - 1) * (listaProductosMBean.tamanoPagina)) + 1} a #{((listaProductosMBean.pagina)
                                                    * (listaProductosMBean.tamanoPagina)) - (listaProductosMBean.tamanoPagina - listaProductosMBean.productos.size())}
                                        de #{listaProductosMBean.totalRegistros}
                                    </p>
                                </div>
                            </div>
                        </h:panelGroup>
                    </h:panelGroup>
                    <div class="row">
                        <h:form id="formLista">
                            <p:remoteCommand name="seleccionarItem" actionListener="#{listaProductosMBean.seleccionarItem}" oncomplete="cerrarModalEspera(); abrirModalDetalleArticulo();"
                                             update=":panelDetalleArticulo"/>
                            <h:panelGroup id="listaProductos">
                                <ui:repeat value="#{listaProductosMBean.productos}" var="producto">
                                    <div class="col-xs-12 col-sm-6 col-md-4 margin-bottom-10" onclick="seleccionarItem([{name: 'item', value: '#{producto.itemCode}'}]);">
                                        <div class="pointer-cursor producto-lista">
                                            <div class="row">
                                                <div class="col-xs-12 center-component">
                                                    <img src="#{imagenProductoMBean.obtenerUrlProducto(producto.itemCode, false)}" style="height: 170px; width: 210.95px"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-9 margin-bottom-10">
                                                    <span style="font-weight: bold; font-size: 24px">
                                                        #{baruGenericMBean.convertirARefCorta(producto.itemCode)}
                                                    </span>
                                                </div>
                                                <div class="col-xs-3 margin-bottom-10">
                                                    <span class="badge badge-matisses-red">
                                                        <h:outputText value="#{producto.availableQuantity}" style="font-size: 22px"/>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 justify-component" style="font-size: 16px; height: 66.7px">
                                                    #{producto.itemName}
                                                </div>
                                            </div>
                                            <hr style="border-bottom: 1px solid #BF0039; margin-bottom: 0px; margin-top: 0px"/>
                                            <div class="row">
                                                <div class="col-xs-12 margin-bottom-10 center-component" style="font-size: 16px; color: #BF0039">
                                                    COP #{baruGenericMBean.getValorFormateado('Double', producto.priceAsInt, 2)}
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 center-component margin-bottom-10">
                                                    Similares: #{producto.similares}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="producto-item">
                                            <div class="row">
                                                <div class="col-xs-12 center-component" style="top: 127px">
                                                    #{baruGenericMBean.convertirARefCorta(producto.itemCode)}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ui:repeat>
                            </h:panelGroup>
                        </h:form>
                    </div>
                    <div class="row">
                        <h:form id="formFiltrosInferior" class="form-inline">
                            <div class="col-xs-12 col-md-4 margin-bottom-10 center-component">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon input-group-matisses noround">Ordenar por</span>
                                        <div class="dropup">
                                            <button class="btn btn-default dropdown-toggle input-lg noround" type="button" style="width: 100%"
                                                    id="selOrdenar" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                #{listaProductosMBean.ordenarPor}
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" aria-labelledby="selOrdenar">
                                                <li class="pointer-cursor">
                                                    <a  onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'NUEVO'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Más nuevos primero
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'NUEVO'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Más nuevos al final
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'REFERENCIA'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Referencia menor a mayor
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'REFERENCIA'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Referencia mayor a menor
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'PRECIO'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Precio menor a mayor
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'PRECIO'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Precio mayor a menor
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'SALDO'}, {name: 'sortOrder', value: 'ASC'}])">
                                                        Saldo menor a mayor
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); ordenarProductos([{name: 'orderBy', value: 'SALDO'}, {name: 'sortOrder', value: 'DESC'}])">
                                                        Saldo mayor a menor
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); alternarOrden();">
                                                <span class="glyphicon #{listaProductosMBean.sortOrder eq 'ASC' ? 'glyphicon-sort-by-order' :
                                                                         (listaProductosMBean.sortOrder eq 'DESC' ? 'glyphicon-sort-by-order-alt' : null)}"></span>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-md-3 margin-bottom-10 center-component">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon input-group-matisses noround">Mostrar</span>
                                        <div class="dropup">
                                            <button class="btn btn-default dropdown-toggle input-lg noround" type="button" style="width: 100%"
                                                    id="selTamanoPagina" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                #{listaProductosMBean.tamanoPagina}
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" aria-labelledby="selTamanoPagina">
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); cambiarTamanoPagina([{name: 'tamanoPagina', value: '12'}])">
                                                        12
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); cambiarTamanoPagina([{name: 'tamanoPagina', value: '24'}])">
                                                        24
                                                    </a>
                                                </li>
                                                <li class="pointer-cursor">
                                                    <a onclick="abrirModalEspera(); cambiarTamanoPagina([{name: 'tamanoPagina', value: '48'}])">
                                                        48
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <span class="input-group-addon input-group-matisses noround">x pag.</span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-md-5 margin-bottom-10 center-component">
                                <div class="form-group">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPrimeraPagina();">
                                            1
                                        </button>
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaAnterior();">
                                            <span class="glyphicon glyphicon-chevron-left"></span>
                                        </button>
                                        <div class="btn-group" role="group">
                                            <div class="dropup">
                                                <button type="button" class="btn btn-default dropdown-toggle btn-lg noround" data-toggle="dropdown" 
                                                        aria-haspopup="true" aria-expanded="false">
                                                    #{listaProductosMBean.pagina} de #{listaProductosMBean.totalPaginas}
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu" style="max-height: 165px; overflow-y: auto;">
                                                    <ui:repeat value="#{listaProductosMBean.paginas}" var="p">
                                                        <li class="pointer-cursor">
                                                            <a onclick="abrirModalEspera(); mostrarPagina([{name: 'pagina', value: '#{p}'}])">
                                                                #{p}
                                                            </a>
                                                        </li>
                                                    </ui:repeat>
                                                </ul>
                                            </div>
                                        </div>
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarPaginaSiguiente();">
                                            <span class="glyphicon glyphicon-chevron-right"></span>
                                        </button>
                                        <button type="button" class="btn btn-default btn-lg noround" onclick="abrirModalEspera(); mostrarUltimaPagina();">
                                            #{listaProductosMBean.totalPaginas}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </div>

        <!-- script references -->
        <script src="/360/js/bootstrap.min.js"></script>
    </h:body>
</html>

